apply plugin: "java"

repositories {
	mavenCentral()
}

dependencies {
	compile group: 'org.apache.logging.log4j', name: 'log4j-api', version: '2.11.0'
	compile group: 'org.apache.logging.log4j', name: 'log4j-core', version: '2.11.0'
}

task run(type: JavaExec) {
	classpath = sourceSets.main.runtimeClasspath
	
	main = "com.clipboard.sender.Main"
	
	if ( ! project.hasProperty("appArgs")) {
		throw new InvalidUserDataException("-PappArgs=\"<args>\" is mandatory!!!")
	} else {
		args(appArgs.split(" "))
	}
}

run.dependsOn clean, build
build.mustRunAfter clean

defaultTasks "run"

